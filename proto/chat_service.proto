syntax = "proto3";

package chat.v1;

option go_package = "github.com/your-moon/grape-shared/proto/chatv1";

message SendMessageRequest {
  uint32 user_id = 1;
  bytes payload_json = 2;  // CreateMessageDTO as JSON (conversation_id, body, etc.)
}
message SendMessageResponse {
  bytes message_json = 1;
  optional string error = 2;
}

message ListRoomsRequest {
  uint32 user_id = 1;
}
message ListRoomsResponse {
  bytes conversations_json = 1;  // array of Conversation
  optional string error = 2;
}

message ListMessagesRequest {
  uint32 conversation_id = 1;
  uint32 user_id = 2;
  int32 limit = 3;
  int32 offset = 4;
}
message ListMessagesResponse {
  bytes messages_json = 1;
  optional string error = 2;
}

message CreateConversationRequest {
  uint32 user_id = 1;
  bytes payload_json = 2;
}
message CreateConversationResponse {
  bytes conversation_json = 1;
  optional string error = 2;
}

message GetConversationRequest {
  uint32 conversation_id = 1;
  uint32 user_id = 2;
}
message GetConversationResponse {
  bytes conversation_json = 1;
  optional string error = 2;
}
